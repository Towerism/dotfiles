#!/bin/bash
# -*- mode: shell-script -*-

set -e

DIR_OVERRIDE=$1
DIR=${DIR_OVERRIDE:-$(dirname $(realpath "$0"))}
OPT="-d $DIR"


which stow >/dev/null 2>&1 || { echo "Unable to automatically install dotfiles: stow was not found"; exit 1; }


echo "Stowing modules:"
while read module; do
    printf "  $module... "
    stow $OPT $module
    echo "done"
done < $DIR/modules
